+function(t,o){"use strict";function r(o,r,e,a,s,n,i,c){o.initFunction=function(){o.matchDetails=JSON.parse(t.sessionStorage.match),o.userData=JSON.parse(t.sessionStorage.userDetail),r.loader=!0,o.noScore=!1,o.userScore=[],o.noUserScore=!1,o.getHistoryScore()},o.getHistoryScore=function(){var t=r.appConfig.baseUrl+r.appConfig.getBoard+"/"+o.matchDetails.matchId;s.get(t).then(function(t){if(r.loader=!1,t&&"success"==t.data.status)if(console.log(t.data.data),o.historyScore=t.data.data,o.tempArray=[],o.historyScore=c("orderBy")(o.historyScore,"-matchPoints"),o.historyScore.length>0){for(var e=0;e<o.historyScore.length;e++){var a=1;o.tempArray.push({_id:o.historyScore[e]._id,username:o.historyScore[e].user.username,matchPoints:o.historyScore[e].matchPoints,rank:a}),a++,o.historyScore[e].user.username==o.userData.username&&o.userScore.push(o.historyScore[e])}o.filterArray(o.historyScore,o.tempArray),o.userScore.length>0?o.noUserScore=!1:(o.userScore=[],o.noUserScore=!0),o.noScore=!1}else o.noScore=!0,o.noUserScore=!1;else o.toastContent=$("<span>"+t.data.error+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(o.toastContent,3e3)},function(t){o.toastContent=$("<span>"+t+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(o.toastContent,3e3)})},o.filterArray=function(t,r){r=c("orderBy")(r,"matchPoints");for(var e=0;e<t.length;e++)for(var a=0;a<r.length;a++)t[e].matchPoints==r[a].matchPoints?o.historyScore[e].rank=r[e].rank:o.historyScore[e].rank=e+1;return o.historyScore},o.$watch("historyChange",function(){t.sessionStorage.match!==o.matchDetails&&(o.matchDetails=JSON.parse(t.sessionStorage.match),r.loader=!0,o.getHistoryScore())}),o.initFunction()}o.module("fantumn").registerCtrl("historyCtrl",r),r.$inject=["$scope","$rootScope","$commons","$logger","fantumnService","exceptionService","$window","$filter"]}(window,angular);