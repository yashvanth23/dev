+function(t,e){"use strict";function o(o,r,a,s,n,i,c,u,h){void 0!=t.sessionStorage.userDetail&&""!=t.sessionStorage.userDetail?(o.initFunction=function(){o.matchDetails=JSON.parse(t.sessionStorage.match),o.userData=JSON.parse(t.sessionStorage.userDetail),r.loader=!0,o.noScore=!1,o.userScore=[],o.backdrop=!1,o.noUserScore=!1,o.getHistoryScore(),o.otheruser=!1,r.p=0,setInterval(function(){Materialize.Toast.removeAll()},3e3)},o.Viewuser=function(t){o.otheruser=t,o.otheruserdata=t.players;for(var a=0;a<o.otheruserdata.length;a++)1==o.otheruserdata[a].positionId?o.otheruserdata[a].positionPlay="GK":2==o.otheruserdata[a].positionId?o.otheruserdata[a].positionPlay="DEF":3==o.otheruserdata[a].positionId?o.otheruserdata[a].positionPlay="MID":o.otheruserdata[a].positionPlay="FW";e.element(".momo").css({opacity:"1",display:"block"}),o.backdrop=!0,h(function(){r.p=1},1300)},o.disable=function(){1==r.p&&(e.element(".momo").css({opacity:"0",display:"none"}),o.backdrop=!1,r.p=0)},o.getHistoryScore=function(){var t=r.appConfig.baseUrl+r.appConfig.getBoard+"/"+o.matchDetails.matchId;n.get(t).then(function(t){if(r.loader=!1,t&&"success"==t.data.status)if(o.historyScore=t.data.data,o.tempArray=[],o.historyScore=u("orderBy")(o.historyScore,"-matchPoints"),o.historyScore.length>0){for(var e=0;e<o.historyScore.length;e++){var a=1;o.tempArray.push({_id:o.historyScore[e]._id,username:o.historyScore[e].user.username,matchPoints:o.historyScore[e].matchPoints,rank:a}),a++,o.historyScore[e].user.username==o.userData.username&&o.userScore.push(o.historyScore[e])}o.filterArray(o.historyScore,o.tempArray),o.userScore.length>0?o.noUserScore=!1:(o.userScore=[],o.noUserScore=!0),o.noScore=!1}else o.noScore=!0,o.noUserScore=!1;else o.toastContent=$("<span>"+t.data.error+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(o.toastContent,3e3)},function(t){o.toastContent=$("<span>"+t+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(o.toastContent,3e3)})},o.filterArray=function(t,e){e=u("orderBy")(e,"matchPoints");for(var r=0;r<t.length;r++)for(var a=0;a<e.length;a++)t[r].matchPoints==e[a].matchPoints?o.historyScore[r].rank=e[r].rank:o.historyScore[r].rank=r+1;return o.historyScore},o.$watch("historyChange",function(){t.sessionStorage.match!==o.matchDetails&&(o.matchDetails=JSON.parse(t.sessionStorage.match),r.loader=!0,o.getHistoryScore())}),o.initFunction()):a.navigate("layout.dashboard","",!1)}e.module("fantumn").registerCtrl("historyCtrl",o),o.$inject=["$scope","$rootScope","$commons","$logger","fantumnService","exceptionService","$window","$filter","$timeout"]}(window,angular);