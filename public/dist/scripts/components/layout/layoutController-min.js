+function(e,t){"use strict";function a(a,o,s,i,n,r,l,c,m,u,d,g,p){a.initFunction=function(){try{a.tab="upcoming",o.name="",a.matchLoader=!0,a.sidemenu=!1,a.loginStatus=!1,a.backdrop=!1,a.loginEnable=!1,a.registerEnable=!1,a.loginSubmit=!1,a.registerSubmit=!1,a.footerHide=!1,a.forgotError=!1,a.guideenable=!1,a.source_image="assets/images/step1.png",a.fin="NEXT",a.imgcount=1,a.content="Pitch a Match for Upcoming Tab",a.user={username:"",password:""},a.userDetail={email:"",password:"",dob:"",username:"",avatar:""},a.loadfalse="345688";var t=n.get("userInfo");if(void 0!=t&&(e.sessionStorage.userDetail=t),void 0!=e.sessionStorage.userDetail&&""!=e.sessionStorage.userDetail&&(a.userInfo=JSON.parse(e.sessionStorage.userDetail),a.loginStatus=!0,o.name=a.userInfo.username,void 0!=e.sessionStorage.match?a.matchDetails=JSON.parse(e.sessionStorage.match):a.matchDetails="undefined"),"upcoming"==e.sessionStorage.pageName?a.footerHide=!0:"setting"==e.sessionStorage.pageName?a.footerHide=!0:a.footerHide=!1,a.pageredirect="",a.redirecturl={index:"",match:"",tabStatus:"",element:""},setInterval(function(){Materialize.Toast.removeAll()},4e3),a.loginStatus){var s={_id:a.userInfo._id},i=o.appConfig.baseUrl+o.appConfig.updateProfile;r.post(i,s).then(function(e){e&&"success"==e.data.status&&(a.name1=e.data.data.firstName,null==a.name1?a.name=e.data.data.username:a.name=e.data.data.firstName)})}a.mobile=!1;var c=o.appConfig.baseUrl+o.appConfig.upcoming;a.check(),setInterval(function(){r.get(c).then(function(e){a.upcome=e.data}),a.getUpcomingMatch()},6e4),a.ageError=!1,o.playerListData=[],a.getViewportWidth()}catch(e){l.promiseRejectsAfterAWhile(e)}},a.returnIST=function(e){return moment(e).utcOffset("+0530").format("YYYY-MM-DD HH:mm")+":00"},a.lol=function(){var e=o.appConfig.baseUrl+o.appConfig.upcoming;r.get(e).then(function(e){a.upcome=e.data,a.getUpcomingMatch()})},a.lead=function(){var e=o.appConfig.baseUrl+o.appConfig.getLeaderBoard+"/"+a.userInfo.username;r.get(e).then(function(e){e&&"success"==e.data.status&&(a.matchCard=e.data.data.matchCards);var t=o.appConfig.baseUrl+o.appConfig.upcoming;r.get(t).then(function(e){a.upcome=e.data,a.getUpcomingMatch()})})},a.check=function(){var e=o.appConfig.baseUrl+o.appConfig.upcoming;if(a.loginStatus){var s=o.appConfig.baseUrl+o.appConfig.getLeaderBoard+"/"+a.userInfo.username;r.get(s).then(function(e){e&&"success"==e.data.status&&(a.matchCard=e.data.data.matchCards),0==a.matchCard.length&&(t.element(".auth-content").css({opacity:"1",display:"block"}),a.guideenable=!0)}),r.get(e).then(function(e){a.upcome=e.data,a.getUpcomingMatch()})}else r.get(e).then(function(e){a.upcome=e.data,a.getUpcomingMatch()})},a.disable=function(){1==o.p&&(t.element(".momo").css({opacity:"0",display:"none"}),o.p=0)},a.getUpcomingMatch=function(){try{var e=new Date;if(e=e.toISOString(),a.loginStatus)if("success"==a.upcome.status){a.upcomingMatch=[];for(t=0;t<a.upcome.data.length;t++){if(e<a.upcome.data[t].match.startingDateTime){8==a.upcome.data[t].season.competitionId?a.na="English League":1007==a.upcome.data[t].season.competitionId?a.na="Indian League":a.na=a.upcome.data[t].season.competition.name;i=(s=a.upcome.data[t].match.startingDateTime).split("T");a.upcomingMatch.push({competition:a.na,home:a.upcome.data[t].team1.name,away:a.upcome.data[t].team2.name,homeLogo:a.upcome.data[t].team1.duplicateLogo,awayLogo:a.upcome.data[t].team2.duplicateLogo,matchId:a.upcome.data[t].match.matchId,start:i[0],starts:a.upcome.data[t].match.startingDateTime,_id:a.upcome.data[t].match._id,picked:-1!=a.matchCard.indexOf(a.upcome.data[t].match._id),teams:{team1:a.upcome.data[t].team1,team2:a.upcome.data[t].team2},match:{lineup:a.upcome.data[t].match.lineup}})}a.matchLoader=!1}a.calculateViewport(a.upcomingMatch)}else a.upcomingMatch="something went wrong";else if("success"==a.upcome.status){a.upcomingMatch=[];for(var t=0;t<a.upcome.data.length;t++)if(e<a.upcome.data[t].match.startingDateTime){8==a.upcome.data[t].season.competitionId?a.na="English League":1007==a.upcome.data[t].season.competitionId?a.na="Indian League":a.na=a.upcome.data[t].season.competition.name;var s=a.upcome.data[t].match.startingDateTime,i=s.split("T");a.upcomingMatch.push({competition:a.na,home:a.upcome.data[t].team1.name,away:a.upcome.data[t].team2.name,homeLogo:a.upcome.data[t].team1.duplicateLogo,awayLogo:a.upcome.data[t].team2.duplicateLogo,matchId:a.upcome.data[t].match.matchId,start:i[0],starts:a.upcome.data[t].match.startingDateTime,_id:a.upcome.data[t].match._id,picked:!1,teams:{team1:a.upcome.data[t].team1,team2:a.upcome.data[t].team2},match:{lineup:a.upcome.data[t].match.lineup}})}a.calculateViewport(a.upcomingMatch),a.matchLoader=!1}else a.upcomingMatch="something went wrong"}catch(e){l.promiseRejectsAfterAWhile(e)}var n=o.appConfig.baseUrl+o.appConfig.historyMatch;r.get(n).then(function(e){a.history=e.data});var c=o.appConfig.baseUrl+o.appConfig.liveMatch;r.get(c).then(function(e){a.live=e.data})},a.getLiveMatch=function(){try{o.appConfig.baseUrl,o.appConfig.liveMatch;if(a.loginStatus)if("success"==a.live.status){a.liveMatch=[];for(e=0;e<a.live.data.length;e++)8==a.live.data[e].season.competitionId?a.na="English League":1007==a.live.data[e].season.competitionId?a.na="Indian League":a.na=a.live.data[e].season.competition.name,a.liveMatch.push({competition:a.na,home:a.live.data[e].team1.name,away:a.live.data[e].team2.name,homeLogo:a.live.data[e].team1.duplicateLogo,awayLogo:a.live.data[e].team2.duplicateLogo,matchId:a.live.data[e].match.matchId,starts:a.live.data[e].match.startingDateTime,teams:{team1:a.live.data[e].team1,team2:a.live.data[e].team2},picked:-1!=a.matchCard.indexOf(a.live.data[e].match._id)});a.calculateViewport(a.liveMatch),a.matchLoader=!1}else a.toastContent=$("<span>Something went Wrong</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3);else if("success"==a.live.status){a.liveMatch=[];for(var e=0;e<a.live.data.length;e++)8==a.live.data[e].season.competitionId?a.na="English League":1007==a.live.data[e].season.competitionId?a.na="Indian League":a.na=a.live.data[e].season.competition.name,a.liveMatch.push({competition:a.na,home:a.live.data[e].team1.name,away:a.live.data[e].team2.name,homeLogo:a.live.data[e].team1.duplicateLogo,awayLogo:a.live.data[e].team2.duplicateLogo,matchId:a.live.data[e].match.matchId,starts:a.live.data[e].match.startingDateTime,teams:{team1:a.live.data[e].team1,team2:a.live.data[e].team2},picked:!1});a.calculateViewport(a.liveMatch),a.matchLoader=!1}else a.toastContent=$("<span> Something Went Wrong</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3)}catch(e){l.promiseRejectsAfterAWhile(e)}},a.getHistoryMatch=function(){try{o.appConfig.baseUrl,o.appConfig.historyMatch;if(a.loginStatus)if("success"==a.history.status){a.historyMatch=[];for(e=0;e<a.history.data.length;e++)8==a.history.data[e].season.competitionId?a.na="English League":1007==a.history.data[e].season.competitionId?a.na="Indian League":a.na=a.history.data[e].season.competition.name,a.historyMatch.push({competition:a.na,home:a.history.data[e].team1.name,away:a.history.data[e].team2.name,homeLogo:a.history.data[e].team1.duplicateLogo,awayLogo:a.history.data[e].team2.duplicateLogo,matchId:a.history.data[e].match.matchId,starts:a.history.data[e].match.startingDateTime,homeScore:a.history.data[e].match.team1Score,awayScore:a.history.data[e].match.team2Score,teams:{team1:a.history.data[e].team1,team2:a.history.data[e].team2},picked:-1!=a.matchCard.indexOf(a.history.data[e].match._id)});a.calculateViewport(a.historyMatch),a.matchLoader=!1}else a.toastContent=$("<span> errror </span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3);else if("success"==a.history.status){a.historyMatch=[];for(var e=0;e<a.history.data.length;e++)8==a.history.data[e].season.competitionId?a.na="English League":1007==a.history.data[e].season.competitionId?a.na="Indian League":a.na=a.history.data[e].season.competition.name,a.historyMatch.push({competition:a.na,home:a.history.data[e].team1.name,away:a.history.data[e].team2.name,homeLogo:a.history.data[e].team1.duplicateLogo,awayLogo:a.history.data[e].team2.duplicateLogo,matchId:a.history.data[e].match.matchId,starts:a.history.data[e].match.startingDateTime,homeScore:a.history.data[e].match.team1Score,awayScore:a.history.data[e].match.team2Score,teams:{team1:a.history.data[e].team1,team2:a.history.data[e].team2},picked:!1});a.calculateViewport(a.historyMatch),a.matchLoader=!1}else a.toastContent=$("<span>"+a.history.error+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3)}catch(e){l.promiseRejectsAfterAWhile(e)}},a.setTab=function(e){a.tab=e,"live"===e?(a.matchLoader=!0,a.getLiveMatch()):"history"===e?(a.matchLoader=!0,a.getHistoryMatch()):(a.matchLoader=!0,a.getUpcomingMatch())},a.isActiveTab=function(e){return a.tab==e},a.calculateViewport=function(e){e.length>3?t.element(".sidenav-content").addClass("sidenav-content-flow"):t.element(".sidenav-content").removeClass("sidenav-content-flow")},a.gotoPage=function(i,n,r,c){try{var m;a.loginStatus?void 0!=a.matchDetails?a.matchDetails.matchId!=n.matchId&&(0==o.playerListData.length?"upcoming"===r?(e.sessionStorage.pageName="upcoming",m=JSON.stringify(n),t.element("li.upcomingmatch").removeClass("active"),t.element("#"+c.target.id).addClass("active"),e.sessionStorage.match=JSON.stringify(n),o.matchChange=n,o.loader=!0,a.loadfalse=m,s.navigate("layout.upcoming",m,!1),a.matchDetails=JSON.parse(e.sessionStorage.match)):"live"===r?(a.pagename="live",m=JSON.stringify(n),e.sessionStorage.pageName="live",t.element("li.upcomingmatch").removeClass("active"),t.element("#"+c.target.id).addClass("active"),e.sessionStorage.match=JSON.stringify(n),o.liveChange=n,s.navigate("layout.live",m,!1),a.matchDetails=JSON.parse(e.sessionStorage.match)):(a.pagename="history",m=JSON.stringify(n),e.sessionStorage.pageName="history",t.element("li.upcomingmatch").removeClass("active"),t.element("#"+c.target.id).addClass("active"),e.sessionStorage.match=JSON.stringify(n),o.historyChange=n,s.navigate("layout.history",m,!1),a.matchDetails=JSON.parse(e.sessionStorage.match)):(s.showWarning("#warningModal","",!0),a.redirecturl={index:i,match:n,tabStatus:r,element:c})):0==o.playerListData.length?"upcoming"===r?(e.sessionStorage.pageName="upcoming",m=JSON.stringify(n),t.element("li.upcomingmatch").removeClass("active"),t.element("#"+c.target.id).addClass("active"),e.sessionStorage.match=JSON.stringify(n),o.matchChange=n,o.loader=!0,a.loadfalse=m,s.navigate("layout.upcoming",m,!1),a.matchDetails=JSON.parse(e.sessionStorage.match)):"live"===r?(a.pagename="live",m=JSON.stringify(n),e.sessionStorage.pageName="live",t.element("li.upcomingmatch").removeClass("active"),t.element("#"+c.target.id).addClass("active"),e.sessionStorage.match=JSON.stringify(n),o.liveChange=n,s.navigate("layout.live",m,!1),a.matchDetails=JSON.parse(e.sessionStorage.match)):(a.pagename="history",m=JSON.stringify(n),e.sessionStorage.pageName="history",t.element("li.upcomingmatch").removeClass("active"),t.element("#"+c.target.id).addClass("active"),e.sessionStorage.match=JSON.stringify(n),o.historyChange=n,s.navigate("layout.history",m,!1),a.matchDetails=JSON.parse(e.sessionStorage.match)):(s.showWarning("#warningModal","",!0),a.redirecturl={index:i,match:n,tabStatus:r,element:c}):(e.sessionStorage.match=JSON.stringify(n),o.matchChange=n,a.redirecturl={index:i,match:n,tabStatus:r,element:c},a.authEnable("login"))}catch(e){l.promiseRejectsAfterAWhile(e)}},$("html").click(function(e){"setting-menu dropdown-button"==e.target.className?($(".setting-menu").addClass("active"),$("ul.drop-menu").addClass("active")):($(".setting-menu").removeClass("active"),$("ul.drop-menu").removeClass("active"))}),$(".username").on("keypress",function(e){var t=new RegExp("^[a-zA-Z0-9]+$"),a=String.fromCharCode(e.charCode?e.charCode:e.which);if(!t.test(a))return e.preventDefault(),!1}),a.gotoNavigate=function(t){0==o.playerListData.length?(a.sidemenu=!1,a.pagename=t,e.sessionStorage.pageName=t,"profile"===t?s.navigate("layout.profile","",!1):"store"===t?s.navigate("layout.store","",!1):"point"===t?s.navigate("layout.points","",!1):"rules"===t?s.navigate("layout.rules","",!1):"contact"===t?s.navigate("layout.contact","",!1):"home"==t?s.navigate("layout.dashboard","",!1):s.navigate("layout.setting","",!1)):(s.showWarning("#warningModal","",!0),a.pageredirect=t)},a.login=function(t){if(a.loginSubmit=!0,a.SocailUsername=!1,t){o.loader=!0;var i=o.appConfig.baseUrl+o.appConfig.login;r.post(i,a.user).then(function(t){if(t&&"success"==t.data.status){a.check(),o.loader=!1,e.sessionStorage.userDetail=JSON.stringify(t.data.data);var i=new Date;i.setDate(i.getDate()+7),n.put("userInfo",e.sessionStorage.userDetail,{expires:i}),a.loginSubmit=!1,a.closeAuth(),a.userInfo=JSON.parse(e.sessionStorage.userDetail),o.name=a.userInfo.username;JSON.stringify(e.sessionStorage.match);a.userD=JSON.parse(e.sessionStorage.userDetail),a.lead(),a.loginStatus=!0;var l={_id:a.userD._id},c=o.appConfig.baseUrl+o.appConfig.updateProfile;r.post(c,l).then(function(e){e&&"success"==e.data.status&&(a.name1=e.data.data.firstName,null==a.name1?a.name=e.data.data.username:a.name=e.data.data.firstName)}),s.navigate("layout.dashboard",{},!1)}else o.loader=!1,a.loginauthError=t.data.error,a.toastContent=a.loginauthError,Materialize.toast(a.toastContent,3e3)})}},a.register=function(t){if(a.registerSubmit=!0,t){if(a.userDetail.password.length>=8)if(a.agreeRegister){o.loader=!0;var i=o.appConfig.baseUrl+o.appConfig.register,l=a.userDetail.email.trim();l=l.toLowerCase();var c="https://www.gravatar.com/avatar/"+(l=u.createHash(l))+"?s=200&d=mm";a.userDetail.avatar=c;var m={username:a.userDetail.username,email:a.userDetail.email,password:a.userDetail.password,social_auth:!1,digitalSignature:a.agreeRegister,facebook:{social_id:null,auth_token:null,profile:null},google:{accessToken:null,idToken:null,imgUrl:null}};console.log(m),r.post(i,m).then(function(t){if(o.loader=!1,t&&"success"==t.data.status){a.loginStatus=!0,e.sessionStorage.userDetail=JSON.stringify(t.data.data);var i=new Date;i.setDate(i.getDate()+7),n.put("userInfo",e.sessionStorage.userDetail,{expires:i}),a.userData=JSON.parse(e.sessionStorage.userDetail);var l={_id:a.userData._id},c=o.appConfig.baseUrl+o.appConfig.updateProfile;r.post(c,l).then(function(e){e&&"success"==e.data.status&&(a.name=e.data.data.username)}),a.userInfo=t.data.data,o.name=a.userInfo.username,a.lol(),a.check(),a.closeAuth(),""!=a.redirecturl?a.gotoPage(a.redirecturl.index,a.redirecturl.match,a.redirecturl.tabStatus,a.redirecturl.element):s.navigate("layout.dashboard",{},!1)}else a.error="",'{ "username": "Invalid username" }'==t.data.error?a.error="UserName Already taken. Please Use Another Username !":'{"username": "Invalid username" }'==t.data.error?a.error="UserName Already taken ":a.error=t.data.error,a.toastContent=a.error,Materialize.toast(a.toastContent,2e3)})}else a.toastContent="Please Agree the Terms of Use",Materialize.toast(a.toastContent,3e3);else a.toastContent="Password Must be minimum 8 Characters",Materialize.toast(a.toastContent,3e3)}},a.authEnable=function(e){a.sidemenu=!1,a.loginEnable=!0,t.element(".auth-content").css({opacity:"1",display:"block"}),a.backdrop=!0,"login"==e?(a.loginEnable=!0,a.registerEnable=!1,a.agreeRegister=!1,a.registerSubmit=!1,a.userDetail={email:"",password:"",dob:"",username:"",avatar:""}):(a.user={username:"",password:""},a.loginSubmit=!1,a.loginEnable=!1,a.registerEnable=!0)},a.closeAuth=function(){t.element(".auth-content").css({opacity:"0",display:"none"}),a.user={username:"",password:""},a.userDetail={email:"",password:"",dob:"",username:"",avatar:""},a.agree=!1,a.agreeRegister=!1,a.backdrop=!1,a.loginSubmit=!1,a.registerSubmit=!1},a.sucesssClose=function(){t.element("#successModal").removeClass("active"),t.element(".circle-loader").removeClass("load-complete"),t.element(".checkmark").css({display:"none"}),o.customLoader=!1},a.errorClose=function(){t.element("#errorModal").removeClass("active"),o.customLoader=!1},a.closeWarning=function(){t.element("#warningModal").removeClass("active"),o.customLoader=!1},a.openSideMenu=function(){a.sidemenu=!1,t.element(".responsive-sidemenutab").animate({left:"0",opacity:"1"}),t.element(".responsive-sidemenutab .backdrop").css({display:"block"})},a.closeSideMenu=function(){t.element(".responsive-sidemenutab").animate({left:"-400px",opacity:"0"}),t.element(".responsive-sidemenutab .backdrop").css({display:"none"})},a.signupWithGoogle=function(e){var t="";"register"==e?a.agreeRegister?(t={clientid:"436866997850-hm9udard1dquu5vjd6g2i8pgvtn7h0qq.apps.googleusercontent.com",cookiepolicy:"single_host_origin",callback:"loginCallback",approvalprompt:"force",requestvisibleactions:"http://schemas.google.com/AddActivity",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.profile.emails.read"},gapi.auth.signIn(t)):(a.toastContent="Please Agree the Terms of Use",Materialize.toast(a.toastContent,3e3)):(a.agreeRegister=!1,t={clientid:"436866997850-hm9udard1dquu5vjd6g2i8pgvtn7h0qq.apps.googleusercontent.com",cookiepolicy:"single_host_origin",callback:"loginCallback",approvalprompt:"force",requestvisibleactions:"http://schemas.google.com/AddActivity",scope:"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.profile.emails.read"},gapi.auth.signIn(t))},e.loginCallback=function(e){e.status.signed_in&&gapi.client.load("plus","v1",function(){gapi.client.plus.people.get({userId:"me"}).execute(function(t){var o={username:t.result.name.givenName,name:t.result.name.givenName,lastname:t.result.familyName,email:t.result.emails[0].value,gender:"",dob:new Date,profile:t.result.image.url,google_id:t.result.id,auth_token:e.access_token,facebook_login:!1};a.socialRegister(o)})})},a.signupWithFacebook=function(e){"register"==e?a.agreeRegister?FB.login(function(e){var t=e.authResponse.accessToken;e.authResponse?FB.api("/me",{locale:"en_US",fields:"id,first_name,last_name,email,link,gender,locale,picture,birthday"},function(e){var o={username:e.first_name+e.last_name,name:e.first_name,lastname:e.last_name,email:e.email,gender:e.gender,dob:e.birthday,profile:e.picture.data.url,facebook_id:e.id,auth_token:t,facebook_login:!0,google_login:!1};a.socialRegister(o)}):console.log("User cancelled login or did not fully authorize.")},{scope:"email"}):(a.toastContent="Please Agree the Terms of Use",Materialize.toast(a.toastContent,3e3)):(a.agreeRegister=!1,FB.login(function(e){var t=e.authResponse.accessToken;e.authResponse?FB.api("/me",{locale:"en_US",fields:"id,first_name,last_name,email,link,gender,locale,picture,birthday"},function(e){var o={username:e.first_name+e.last_name,name:e.first_name,lastname:e.last_name,email:e.email,gender:e.gender,dob:e.birthday,profile:e.picture.data.url,facebook_id:e.id,auth_token:t,facebook_login:!0};a.socialRegister(o)}):console.log("User cancelled login or did not fully authorize.")},{scope:"email"}))},a.socialRegister=function(t){if(void 0!=t.email){var i=o.appConfig.baseUrl+o.appConfig.socialuser+"/"+t.email,l="";r.get(i).then(function(i){if(i&&"success"==i.data.status){a.f=i.data.data,a.loginEnable=!1,a.registerEnable=!1,a.SocailUsername=!1,e.sessionStorage.userDetail=JSON.stringify(i.data.data);var c=new Date;c.setDate(c.getDate()+7),n.put("userInfo",e.sessionStorage.userDetail,{expires:c}),a.userInfo=JSON.parse(e.sessionStorage.userDetail),o.name=a.userInfo.username,a.loginStatus=!0,a.lead();var m=o.appConfig.baseUrl+o.appConfig.updateProfile;l={_id:a.f._id},r.post(m,l).then(function(e){e&&"success"==e.data.status&&(a.name=e.data.data.firstName)}),""!=a.redirecturl?a.gotoPage(a.redirecturl.index,a.redirecturl.match,a.redirecturl.tabStatus,a.redirecturl.element):s.navigate("layout.dashboard",{},!1),a.closeAuth()}else a.registerEnable=!1,a.loginEnable=!1,a.SocailUsername=!0,a.reg=function(i){if(i){var l=o.appConfig.baseUrl+o.appConfig.register,c="",m="";c=t.facebook_login?{username:a.userDetail.username,email:t.email,password:"",social_auth:!0,digitalSignature:a.agreeRegister,facebook:{social_id:t.facebook_id,auth_token:t.auth_token,profile:t.profile},google:{accessToken:null,idToken:null,imgUrl:null}}:{username:a.userDetail.username,email:t.email,password:"",social_auth:!0,digitalSignature:a.agreeRegister,facebook:{social_id:null,auth_token:null,profile:null},google:{accessToken:t.auth_token,idToken:t.google_id,imgUrl:t.profile}},r.post(l,c).then(function(i){if(o.loader=!1,i&&"success"==i.data.status){a.loginStatus=!0,a.userInfo=i.data.data,m={_id:a.userInfo._id,firstName:t.name,lastName:t.lastname,dob:t.dob,gender:t.gender},e.sessionStorage.userDetail=JSON.stringify(i.data.data);var l=new Date;l.setDate(l.getDate()+7),n.put("userInfo",e.sessionStorage.userDetail,{expires:l}),a.lead();var c=o.appConfig.baseUrl+o.appConfig.updateProfile;r.post(c,m).then(function(e){e&&"success"==e.data.status&&(a.name=e.data.data.firstName)}),""!=a.redirecturl?a.gotoPage(a.redirecturl.index,a.redirecturl.match,a.redirecturl.tabStatus,a.redirecturl.element):(s.navigate("layout.dashboard",{},!1),a.lol()),a.getUpcomingMatch(),a.closeAuth()}else a.toastContent=$("<span>"+i.data.error+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3)},function(e){a.toastContent=e,Materialize.toast(a.toastContent,3e3)})}else a.toastContent="Select Your username",Materialize.toast(a.toastContent,3e3)}})}else a.toastContent="Email address not available in Social Login",Materialize.toast(a.toastContent,3e3)},a.logout=function(){n.remove("userInfo"),e.sessionStorage.clear(),a.sidemenu=!1,a.loginStatus=!1,a.guideenable=!1,a.guide1=!1,a.getUpcomingMatch(),s.navigate("layout.dashboard",{},!1)},a.showTermsOfCondition=function(){t.element("#termsCondition").css({display:"block",opacity:"1"}),o.customLoader=!0,a.termsLoader=!0},a.closeTermsOfCondition=function(){t.element("#termsCondition").css({display:"none",opacity:"0"}),a.termsLoader=!1,o.customLoader=!1},a.forgotOpen=function(){t.element(".forgot-modalpopup").addClass("active"),a.forgotDrop=!0,a.emailStatus=!0},a.forgotPassword=function(e){if(a.forgotSubmit=!0,e){o.loader=!0,a.forgotSubmit=!1;var t={email:a.forgotEmail},s=o.appConfig.baseUrl+o.appConfig.forgotPassword;r.post(s,t).then(function(e){o.loader=!1,e&&"success"==e.data.status?(a.forgotEmail="",a.otpStatus=!0,a.emailStatus=!1,a.forgotError=!1,a.toastContent="OTP Send your Email id please check",Materialize.toast(a.toastContent,3e3)):"user not found"==e.data.error?(a.toastContent=$("<span>Email not found</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),a.forgotError=!0,Materialize.toast(a.toastContent,3e3)):(a.toastContent=$("<span>"+e.data.error+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3))},function(e){a.toastContent=$("<span>"+e+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3)})}},a.getToken=function(e){if(a.otpForm=!0,e){o.loader=!0,a.otpForm=!1;var t=o.appConfig.baseUrl+o.appConfig.getResetToken+"/"+a.otp;r.get(t).then(function(e){o.loader=!1,e&&"success"==e.data.status?(a.userOtp=a.otp,a.otp="",a.otpStatus=!1,a.passwordStatus=!0):(a.toastContent=$("<span>"+e.data.error+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3))},function(e){a.toastContent=$("<span>"+e+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3)})}},a.submitForgotPassword=function(e){if(a.submitForgotForm=!0,e){o.loader=!0,a.submitForgotForm=!1;var t=o.appConfig.baseUrl+o.appConfig.resetPassword,s={token:a.userOtp,password:a.forgotPassCode};r.post(t,s).then(function(e){o.loader=!1,e&&"success"==e.data.status?(a.otp="",a.otpStatus=!1,a.passwordStatus=!0,a.forgotClose()):(a.toastContent=$("<span>"+e.data.error+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3))},function(e){a.toastContent=$("<span>"+e+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(a.toastContent,3e3)})}},a.forgotClose=function(){t.element(".forgot-modalpopup").removeClass("active"),a.forgotDrop=!1,a.emailStatus=!0,a.otpStatus=!1,a.passwordStatus=!1,a.forgotEmail="",a.otp="",a.forgotPassCode="",a.submitForgotForm=!1,a.otpForm=!1},a.redirectCustom=function(){o.playerListData=[],""==a.pageredirect?a.gotoPage(a.redirecturl.index,a.redirecturl.match,a.redirecturl.tabStatus,a.redirecturl.element):a.gotoNavigate(a.pageredirect),a.pageredirect="",a.closeWarning()},$(document).on("click","#toast-container .toast button",function(){var e=$(this).parent();$(e).fadeOut()}),a.getViewportWidth=function(){var t=$(e).width();a.mobile=t<=1023},a.$watch("pagename",function(){"upcoming"==e.sessionStorage.pageName?a.footerHide=!0:"setting"==e.sessionStorage.pageName?a.footerHide=!0:a.footerHide=!1}),a.initFunction()}t.module("fantumn").registerCtrl("layoutController",a),a.$inject=["$scope","$rootScope","$commons","$logger","$cookies","fantumnService","exceptionService","$q","$interval","md5","$filter"]}(window,angular);