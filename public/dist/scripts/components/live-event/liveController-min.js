+function(e,t){"use strict";function r(r,o,a,n,s,i,c,l){r.initFunction=function(){r.matchDetails=JSON.parse(e.sessionStorage.match),r.userData=JSON.parse(e.sessionStorage.userDetail),o.loader=!0,r.noScore=!1,r.noUserScore=!1,r.userScore=[],r.getLiveScore()},r.getLiveScore=function(){var e=o.appConfig.baseUrl+o.appConfig.getBoard+"/"+r.matchDetails.matchId;s.get(e).then(function(e){if(o.loader=!1,e&&"success"==e.data.status){if(r.liveScore=e.data.data,r.tempArray=[],r.historyScore=l("orderBy")(r.liveScore,"-matchPoints"),r.liveScore.length>0){for(var a=0;a<r.liveScore.length;a++){var n=1;r.tempArray.push({_id:r.liveScore[a]._id,username:r.liveScore[a].user.username,matchPoints:r.liveScore[a].matchPoints,rank:n}),n++,r.liveScore[a].user.username==r.userData.username&&r.userScore.push(r.liveScore[a])}r.filterArray(r.liveScore,r.tempArray),r.userScore.length>0?r.noUserScore=!1:(r.userScore=[],r.noUserScore=!0),r.noScore=!1}else r.noScore=!0,r.noUserScore=!1;t.element(".float-refresh").hasClass("refresher")&&t.element(".float-refresh").removeClass("refresher")}else r.toastContent=$("<span>"+e.data.error+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(r.toastContent,3e3)},function(e){r.toastContent=$("<span>"+e+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(r.toastContent,3e3)})},r.refreshLive=function(){t.element(".float-refresh").addClass("refresher"),r.getLiveScore()},r.filterArray=function(e,t){t=l("orderBy")(t,"matchPoints");for(var o=0;o<e.length;o++)for(var a=0;a<t.length;a++)e[o].matchPoints==t[a].matchPoints?r.liveScore[o].rank=t[o].rank:r.liveScore[o].rank=o+1;return r.liveScore},r.$watch("liveChange",function(){e.sessionStorage.match!==r.matchDetails&&(r.matchDetails=JSON.parse(e.sessionStorage.match),o.loader=!0,r.getLiveScore())}),r.initFunction()}t.module("fantumn").registerCtrl("liveCtrl",r),r.$inject=["$scope","$rootScope","$commons","$logger","fantumnService","exceptionService","$window","$filter"]}(window,angular);