+function(e,t){"use strict";function o(o,r,a,s,n,i,c,l){void 0!=e.sessionStorage.userDetail&&""!=e.sessionStorage.userDetail?(o.initFunction=function(){o.matchDetails=JSON.parse(e.sessionStorage.match),o.userData=JSON.parse(e.sessionStorage.userDetail),r.loader=!0,o.noScore=!1,o.noUserScore=!1,o.userScore=[],o.ea=0,o.getLiveScore(),setInterval(function(){Materialize.Toast.removeAll()},3e3)},o.Viewuser=function(e){o.otheruser=e,o.otheruserdata=e.players,t.element(".momo").css({opacity:"1",display:"block"}),$timeout(function(){o.ea=1},1300)},o.disable=function(){1==o.ea&&(t.element(".momo").css({opacity:"0",display:"none"}),o.ea=0)},o.close=function(){t.element(".momo").css({opacity:"0",display:"none"}),o.ea=0},o.getLiveScore=function(){var e=r.appConfig.baseUrl+r.appConfig.getBoard+"/"+o.matchDetails.matchId;n.get(e).then(function(e){if(r.loader=!1,e&&"success"==e.data.status){if(o.liveScore=e.data.data,o.tempArray=[],o.historyScore=l("orderBy")(o.liveScore,"-matchPoints"),o.liveScore.length>0){for(var a=0;a<o.liveScore.length;a++){var s=1;o.tempArray.push({_id:o.liveScore[a]._id,username:o.liveScore[a].user.username,matchPoints:o.liveScore[a].matchPoints,rank:s}),s++,o.liveScore[a].user.username==o.userData.username&&o.userScore.push(o.liveScore[a])}o.filterArray(o.liveScore,o.tempArray),o.userScore.length>0?o.noUserScore=!1:(o.userScore=[],o.noUserScore=!0),o.noScore=!1}else o.noScore=!0,o.noUserScore=!1;t.element(".float-refresh").hasClass("refresher")&&t.element(".float-refresh").removeClass("refresher")}else o.toastContent=$("<span>"+e.data.error+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(o.toastContent,3e3)},function(e){o.toastContent=$("<span>"+e+"</span>").add($('<button class="btn-flat toast-action"  >OK</button>')),Materialize.toast(o.toastContent,3e3)})},o.refreshLive=function(){t.element(".float-refresh").addClass("refresher"),o.getLiveScore()},o.filterArray=function(e,t){t=l("orderBy")(t,"matchPoints");for(var r=0;r<e.length;r++)for(var a=0;a<t.length;a++)e[r].matchPoints==t[a].matchPoints?o.liveScore[r].rank=t[r].rank:o.liveScore[r].rank=r+1;return o.liveScore},o.$watch("liveChange",function(){e.sessionStorage.match!==o.matchDetails&&(o.matchDetails=JSON.parse(e.sessionStorage.match),r.loader=!0,o.getLiveScore())}),o.initFunction()):a.navigate("layout.dashboard","",!1)}t.module("fantumn").registerCtrl("liveCtrl",o),o.$inject=["$scope","$rootScope","$commons","$logger","fantumnService","exceptionService","$window","$filter"]}(window,angular);